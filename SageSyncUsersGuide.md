

# Introduction #

SageSync is a plugin for the SageTV v7.x platform that provides an independent filesystem of playlist files for all of your SageTV recordings.  These playlists can then be loaded and played in a variety of third party media streamers such as XMBC, Boxee, and the WDTV Live HD.

# Requirements #

## Installation ##

Install the SageSync plugin on your SageTV server.  After initial installation you must go configure the plugin as the default settings will prevent the plugin from starting up - this is done intentionally.  You must at least pick a target directory for the hierarchy of playlist files that will be generated.

## Network Configuration ##

The directory you choose as the target for your playlists along with **all** of the directories that store your SageTV recordings must be shared and accessible on your LAN via a protocol that is usable by your streaming device.  Most devices support Windows network shares (a.k.a. Samba or SMB).  Some will support NFS.

# Usage #

Once you've installed and configured the plugin and you've ensured your network configuration is correct to allow your device(s) to access your playlists and recordings then simply point your streaming device at your share of playlists.  Browse the playlists and choose one to play.  If everything is configured properly then playback should just begin.  If not, then check the device's log files for possible configuration errors and correct accordingly.

# Playlist Syncing (Read Carefully) #

The key to this plugin is its ability to sync watched status and, optionally, delete status of your Sage recordings as you view and delete them via the generated playlists.

To do this, the SageSync plugin monitors your hierarchy of playlists via operating system events and any time a playlist file is deleted the plugin is **immediately** notified by the operating system and then will update your SageTV system based on your plugin settings.  By default, the plugin will mark any Sage recording as watched as soon as the playlist file is deleted.  Optionally, you can also have the plugin delete the media file on the SageTV server anytime a playlist is deleted.  **Deleting the media file will delete both the object in `wiz.bin` and the actual recording from disk!**

**It is also very important to realize** that while this plugin is active, it receives OS events no matter who or what deletes files from your playlist hierarchy.  So **you do NOT** want to go in and do a mass delete operation of your playlists **at ANY time!**  If you need/want to rebuild your playlists then do so through the plugin configuration screen.  Clicking the **`Recreate`** button from there will suspend the OS event monitoring and rebuild your playlists without syncing deletes back to the SageTV server.

**If you want to manually delete/modify playlists then DISABLE the SageSync plugin before starting!**  Failure to do so will end up doing some undesirable things to your watched statuses, and possible start mass deleting your recordings if you have the delete option enabled.

**NOTE: Renaming a file will trigger an OS file deleted event for the file based on its old name!  This will cause a sync event with the SageTV server to occur!**

**NOTE: This plugin does NOT poll the playlist hierarchy looking for changes, it receives events from the operating system immediately anytime a file is deleted.**  You simply cannot avoid the plugin processing a deleted event while it is running - if you want to change the hierarchy manually and don't want this plugin to sync your changes with the server then you **MUST** disable the plugin.

# Playlist Updating #

Your playlist hierarchy is updated anytime any of the following SageTV events occur:

  * A recording stops/completes
  * A recording is deleted (directly in SageTV)

Anytime one of these events occur then your hierarchy is immediately recalcualated and updated.  Again, this occurs immediately while the plugin is enabled.  To prevent this syncing from occurring then you must disable the plugin - there is no other way to prevent this action from happening.

## Live TV/Active Recordings ##

Most, if not all, streaming devices simply do not handle media files that are actively recording/downloading.  If you chose to play such a recording five minutes after it started recording then you'd only get playback of the first five minutes then the device would stop and act as if the recording was complete.  If you restarted playback then you'd have access to the next five minutes and so on.  Because of this, SageSync does **not** create a playlist for a recording until the recording has completed and therefore live TV (and active recording) playback is not supported by this plugin.

# Device Support Matrix #

The follow matrix shows the results of device/software testing against the hierarchy of playlists generated by this plugin.  If you've tested playback on other devices/software please let me know so your results can be added to the matrix below.

| **Device** | **Playback** | **Comskip** | **Metadata** | **Notes** |
|:-----------|:-------------|:------------|:-------------|:----------|
| XBMC 10.1 (PC) | YES | YES | Partial |  |
| Boxee (PC) | YES | YES | NO |  |
| Boxee (D-Link) | YES | YES | NO<sup>1</sup> |  |
| WDTV Live HD | NO<sup>2</sup> | NO | Untested<sup>3</sup> |  |

  1. This is currently being investigated by darcilicious
  1. This device plays the content fine, but cannot load and use the playlists as generated by SageSync; there appears to be no sane way to generate useful playlists this device can use
  1. Because of #2, I didn't bother testing metadata so it could very well support metadata, but I didn't keep the device around long enough to find out

## My Device Recommendation ##

And this only a recommendation, based on limited testing to date, but so far the D-Link Boxee Box is doing just about everything as intended.  But there is one massive hole in the Boxee Box: you **CANNOT DELETE** files from the box.  Simply can't be done, and apparently that's by design.  This really sucks.  But as far as playing back the playlists, etc., it does a really nice job of that.

The WDTV Live HD plays the content beautifully as well, but can't play playlists.  This device's support for playlists is terrible.  So frustrated by this that I took the device back to the store in less than 48 hours after starting to test.

XBMC is a good choice for a PC based solution.  Also, XBMC might be an interesting option depending on how the whole [Raspberry Pi](http://raspberrypi.org) and [Raspbmc](http://www.raspbmc.com/) projects turn out.